<!--
MkDocs version : 1.6.1
Build Date UTC : 14 February 2026 22:27:03
Last edit: 13 February 2026
-->
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="theme-color" content="#338033">
        <meta name="theme-color" content="#338033" media="(prefers-color-scheme: dark)">
        <meta property="og:image" content="../images/image-facebook.jpg">
        <meta property="og:image:type" content="image/jpeg">
        <meta property="og:image:width" content="1080">
        <meta property="og:image:height" content="1080">

        
        
        <link rel="canonical" href="https://sumo.dlr.de/docs/Demand/Shortest_or_Optimal_Path_Routing.html">
        <link rel="shortcut icon" href="../images/favicon.ico">
        <title>Shortest or Optimal Path Routing - SUMO Documentation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.all.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="apple-touch-icon" href="../images/apple-touch-icon.png">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-3.7.0.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 

      <script>
        // DARK MODE
        function detectColorScheme(){
          var theme="light";

          if(localStorage.getItem("sumo-docs-theme")){
              if(localStorage.getItem("sumo-docs-theme") == "dark"){
                  var theme = "dark";
              }
          } else if(!window.matchMedia) {
              return false;
          } else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
              var theme = "dark";
          }

          if (theme=="dark") {
              document.documentElement.setAttribute("data-theme", "dark");
          }
        }
        detectColorScheme();
      </script>

    </head>

    <body>

    <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary text-center">
    <div class="container-fluid">
        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>

        <!-- Expanded navigation -->
        <div id="navbar-collapse" class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li class="navitem">
                        <a href="../index.html" class="nav-link">Documentation</a>
                    </li>
                    <li class="navitem">
                        <a href="../Tutorials/index.html" class="nav-link">Tutorials</a>
                    </li>
                    <li class="navitem">
                        <a href="../FAQ.html" class="nav-link">FAQ</a>
                    </li>
                    <li class="navitem">
                        <a href="../Downloads.html" class="nav-link">Downloads</a>
                    </li>
                    <li class="navitem">
                        <a href="../Publications.html" class="nav-link">Publications</a>
                    </li>
                    <li class="navitem">
                        <a href="../Developer/index.html" class="nav-link">Developer</a>
                    </li>
                    <li class="navitem">
                        <a href="../ChangeLog.html" class="nav-link">ChangeLog</a>
                    </li>
                    <li class="navitem">
                        <a href="https://eclipse.dev/sumo/contact/" class="nav-link">Contact</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav ml-auto">
                <li class="nav-item">
                    <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa-solid fa-magnifying-glass"></i> <u>S</u>earch
                    </a>
                </li>
                    <li class="nav-item">
                        <a rel="edit" href="https://github.com/eclipse-sumo/sumo/edit/main/docs/web/docs/Demand/Shortest_or_Optimal_Path_Routing.md" class="nav-link"><i class="fa-brands fa-github"></i> <u>E</u>dit on GitHub</a>
                    </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                    More <i class="fa-solid fa-circle-chevron-down"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item no-arrow-link" href="https://github.com/eclipse/sumo/issues">Report a Bug / Issue / Typo</a>
                    <a class="dropdown-item" href="../Editing_Articles.html">Help on editing articles</a>
                    <a class="dropdown-item" href="https://github.com/eclipse/sumo/commits/main/docs/web">Recent documentation changes</a>
                    <a class="dropdown-item" href="#" data-toggle="modal" data-target="#mkdocs_keyboard_modal">Keyboard Shortcuts</a>
                    <a class="dropdown-item no-arrow-link" href="https://sumo.dlr.de/sumo_documentation.zip">Download the Documentation</a>
                    <span class="dropdown-item" id="dark-mode-div">Dark mode <label id="theme-switch" class="theme-switch" for="checkbox_theme">
                        <input type="checkbox" id="checkbox_theme">
                    </label></span>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="languagedrop" data-toggle="dropdown">
                    <i class="fa-solid fa-language"></i> Languages <i class="fa-solid fa-circle-chevron-down"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right">
                    <span class="dropdown-item">
                        Translations are generated automatically by Google Translate:
                    </span>
                    <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Demand/Shortest_or_Optimal_Path_Routing.html?_x_tr_sl=en&_x_tr_tl=de">Deutsch</a>
                    <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Demand/Shortest_or_Optimal_Path_Routing.html?_x_tr_sl=en&_x_tr_tl=es">Español</a>
                    <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Demand/Shortest_or_Optimal_Path_Routing.html?_x_tr_sl=en&_x_tr_tl=pt">Português</a>
                    <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Demand/Shortest_or_Optimal_Path_Routing.html?_x_tr_sl=en&_x_tr_tl=fr">Français</a>
                    <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Demand/Shortest_or_Optimal_Path_Routing.html?_x_tr_sl=en&_x_tr_tl=it">Italiano</a>
                    <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Demand/Shortest_or_Optimal_Path_Routing.html?_x_tr_sl=en&_x_tr_tl=zh-CN">简体中文</a>
                    <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Demand/Shortest_or_Optimal_Path_Routing.html?_x_tr_sl=en&_x_tr_tl=zh-TW">繁體中文</a>
                    <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Demand/Shortest_or_Optimal_Path_Routing.html?_x_tr_sl=en&_x_tr_tl=tr">Türkçe</a>
                    <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Demand/Shortest_or_Optimal_Path_Routing.html?_x_tr_sl=en&_x_tr_tl=ja">日本語</a>
                    <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Demand/Shortest_or_Optimal_Path_Routing.html?_x_tr_sl=en&_x_tr_tl=ko">한국어</a>
                    <a class="dropdown-item" href="https://sumo-dlr-de.translate.goog/docs/Demand/Shortest_or_Optimal_Path_Routing.html?_x_tr_sl=auto&_x_tr_tl=en"><i class="fa-solid fa-arrow-right"></i> Other languages</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container-fluid">
          <div class="row">
                <div class="col-md-3">
                  <div class="text-center"><a href="../index.html" style="display: inline-block; margin-top: 5px;"><img src="../images/sumo-logo.png" class="sumoLogo" alt="SUMO Logo" width="120px"></a></div>
                  
<div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed mb-1" data-toggle="collapse" data-target="#toc-collapse" title="Contents">
            <span class="fa-solid fa-angle-down"></span>
        </button>
    </div>
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary toc-scroll toc">
        <ul class="nav flex-column bs-sidenav">
            <p style="margin-top:5px; color:#777777;" class="text-center">Contents</p>
            <li class="nav-item main"><a href="#introduction">Introduction</a></li>
            <li class="nav-item main"><a href="#trip_definitions">Trip Definitions</a></li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#routing_between_junctions" class="nav-link">• Routing between Junctions</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#routing_between_stops" class="nav-link">• Routing between Stops</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#mapmatching" class="nav-link">• Mapmatching</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#vehicle_types" class="nav-link">• Vehicle Types</a>
                </li>
            <li class="nav-item main"><a href="#flow_definitions">Flow Definitions</a></li>
            <li class="nav-item main"><a href="#custom_edge_weights">Custom edge weights</a></li>
            <li class="nav-item main"><a href="#access_restrictions">Access restrictions</a></li>
            <li class="nav-item main"><a href="#repair_routes">Repair routes</a></li>
            <li class="nav-item main"><a href="#converting_input_styles">Converting Input Styles</a></li>
            <li class="nav-item main"><a href="#usage_examples">Usage Examples</a></li>
            <li class="nav-item main"><a href="#dealing_with_errors_during_routing">Dealing with Errors During Routing</a></li>
        </ul>
    </div>

    <div class="admonition conference" style="position: sticky; margin-top: 20px; margin-bottom:10px;">
        <p>visit <a class="no-arrow-link" href="https://eclipse.dev/sumo">eclipse.dev/sumo</a></p>
    </div>

    <div class="admonition" style="position: sticky; margin-top: 20px; margin-bottom:10px; background-color: #d6cbb2; border-color: #c6b795; padding: 0;">
        <center>
            <a class="no-arrow-link" href="https://eclipse.dev/sumo/conference"><img src="../images/SUMO2026.png" alt="SUMO User Conference 2025" class="img-fluid" style="max-height: 200px"></a>
        </center>
    </div>

</div>
                </div>
                <div class="col-md-9 main-area" role="main">
                   <!-- page.is_homepage seems to be broken in Mkdocs > 1.1.0 -->
                  <ul class="breadcrumbs">
    <script>
        var pagePath = "/docs/Demand/Shortest_or_Optimal_Path_Routing.html";
        var splitUrl = pagePath.split("/");
        splitUrl.pop();
        splitUrl.shift();
        if (splitUrl[0] == 'docs') splitUrl.shift();
        var homeLink = "../index.html";
        document.write('<li class="breadcrumb-item"><a href="' + homeLink + '"><i class="fa-solid fa-house"></i></a></li>');
        var prev = '';

        var dirLink = splitUrl.map(function (el) {
        el = prev + el; prev = el + '/'; return el;
        });

        for (let i = 0; i < splitUrl.length; i++) {
            document.write("<li class=\"breadcrumb-item\"><a class=\"no-arrow-link\" href=\"../" + dirLink[i] + "\">" + splitUrl[i] + "</a></li>");
        }
    </script>
    <li class="breadcrumb-item active">Shortest or Optimal Path Routing</li>
</ul>
                  <hTitles>Shortest or Optimal Path Routing<hr style="border: 0.5px solid #338033; margin-top: 5px !important;"></hTitles>
                  
                  

<h1 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">#</a></h1>
<p><a href="../duarouter.html">duarouter</a> can be used to import demand data
given by source and destination edges (so called <em>trips</em> and ''flows
''). Furthermore, it can be used to repair an existing <em>route</em>-file i.e.
if a given route has an unconnected edge list. To achieve dynamic user
assignment, <a href="../duarouter.html">duarouter</a> and
<a href="../sumo.html">sumo</a> must be called iteratively. This is described in
<a href="Dynamic_User_Assignment.html">Demand/Dynamic User
Assignment</a>. Beginning with
version 0.29.0, <a href="../duarouter.html">duarouter</a> also supports
<a href="../IntermodalRouting.html">IntermodalRouting</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <em>trip</em> and <em>flow</em> elements described below may also be <a href="../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#incomplete_routes_trips_and_flows">loaded directly</a> into <a href="../sumo.html">sumo</a>. This takes up-to date traffic states within the network into account when computing routes but slows down the simulation.</p>
</div>
<h1 id="trip_definitions">Trip Definitions<a class="headerlink" href="#trip_definitions" title="Permanent link">#</a></h1>
<p>Trip definitions that can be laid into the network may be supplied to
the router using an XML-file. The syntax of a single trip definition is:
<code>&lt;trip id="&lt;ID&gt;" depart="" from="&lt;ORIGIN_EDGE_ID&gt;" to="&lt;DESTINATION_EDGE_ID&gt;" [type="&lt;VEHICLE_TYPE&gt;"] [color="&lt;COLOR&gt;"]/&gt;</code>.</p>
<table>
<thead>
<tr>
<th>Attribute Name</th>
<th>Value Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>id (string)</td>
<td>The name of vehicles that will be generated using this trip definition (a running number if not given)</td>
</tr>
<tr>
<td><strong>depart</strong></td>
<td>int</td>
<td>The departure time of the (first) vehicle which is generated using this trip definition</td>
</tr>
<tr>
<td>from</td>
<td>edge id</td>
<td>The name of the edge the route starts at; the edge must be a part of the used network. Optional, if one of the via-attributes is used or if the trip includes stops.</td>
</tr>
<tr>
<td>to</td>
<td>edge id</td>
<td>The name of the edge the route ends at; the edge must be a part of the used network. Optional, if one of the via-attributes is used or if the trip includes stops.</td>
</tr>
<tr>
<td>via</td>
<td>edge ids</td>
<td>List of intermediate edge ids which shall be part of the route; the edges must be a part of the used network</td>
</tr>
<tr>
<td>fromTaz</td>
<td>district id</td>
<td>The name of the <a href="Importing_O/D_Matrices.html#describing_the_taz">district</a> the route starts at. <a href="../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#traffic_assignment_zones_taz">TAZ edges are selected so that travel time is minimized.</a></td>
</tr>
<tr>
<td>toTaz</td>
<td>district id</td>
<td>The name of the <a href="Importing_O/D_Matrices.html#describing_the_taz">district</a> the route ends at. <a href="../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#traffic_assignment_zones_taz">TAZ edges are selected so that travel time is minimized.</a></td>
</tr>
<tr>
<td>type</td>
<td>type id</td>
<td>The type id of the vehicle to generate</td>
</tr>
<tr>
<td>color</td>
<td>color</td>
<td>This generated vehicle's color</td>
</tr>
<tr>
<td>departLane</td>
<td>int/string (≥0,"random","free","departlane")</td>
<td>The lane on which the vehicle shall be inserted</td>
</tr>
<tr>
<td>departPos</td>
<td>float(m)/string ("random","free","random_free","base")</td>
<td>The position at which the vehicle shall enter the net; "free" means the point closest to the start of the departlane where it is possible to insert the vehicle. "random_free" tries forcefully to find a free random position and if that fails, places the vehicle at the next "free" position. "base" sets the vehicle's depart position to the vehicle's length + eps (eps=.1m), this means the vehicle is completely at the begin of the depart lane.</td>
</tr>
<tr>
<td>departSpeed</td>
<td>float(m/s)/string (≥0,"random","max")</td>
<td>The speed with which the vehicle shall enter the network.</td>
</tr>
<tr>
<td>arrivalLane</td>
<td>int/string (≥0,"current")</td>
<td>The lane at which the vehicle shall leave the network<br><br><strong>Note:</strong> see <a href="../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#vehicles_and_routes">Definition of Vehicles, Vehicle Types, and Routes#Vehicles and Routes</a></td>
</tr>
<tr>
<td>arrivalPos</td>
<td>float(m)/string (≥0<sup>(1)</sup>,"random","max")</td>
<td>The position at which the vehicle shall leave the network<br><br><strong>Note:</strong> see <a href="../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#vehicles_and_routes">Definition of Vehicles, Vehicle Types, and Routes#Vehicles and Routes</a></td>
</tr>
<tr>
<td>arrivalSpeed</td>
<td>float(m/s)/string (≥0,"current")</td>
<td>The speed with which the vehicle shall leave the network<br><br><strong>Note:</strong> see <a href="../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#vehicles_and_routes">Definition of Vehicles, Vehicle Types, and Routes#Vehicles and Routes</a></td>
</tr>
<tr>
<td>fromJunction</td>
<td>junction id</td>
<td>The junction from which to depart <a href="#routing_between_junctions">note</a></td>
</tr>
<tr>
<td>toJunction</td>
<td>junction id</td>
<td>The junction at which to arrive <a href="#routing_between_junctions">note</a></td>
</tr>
<tr>
<td>viaJunctions</td>
<td>junction ids</td>
<td>The junctions to pass along the way <a href="#routing_between_junctions">note</a></td>
</tr>
<tr>
<td>fromXY</td>
<td>float, float</td>
<td>The network position from which to depart <a href="#mapmatching">note</a></td>
</tr>
<tr>
<td>toXY</td>
<td>float, float</td>
<td>The network position from which to depart <a href="#mapmatching">note</a></td>
</tr>
<tr>
<td>viaXY</td>
<td>float, float [float,float]</td>
<td>The network positions to pass along the way <a href="#mapmatching">note</a></td>
</tr>
<tr>
<td>fromLonLat</td>
<td>float, float</td>
<td>The network position from which to depart in geo-coordinates <a href="#mapmatching">note</a></td>
</tr>
<tr>
<td>toLonLat</td>
<td>float, float</td>
<td>The network position from which to depart in geo-coordinates <a href="#mapmatching">note</a></td>
</tr>
<tr>
<td>viaLonLat</td>
<td>float, float [float,float]</td>
<td>The network positions to pass along the way in geo-coordinates  <a href="#mapmatching">note</a></td>
</tr>
<tr>
<td>speedFactor</td>
<td>float &gt; 0</td>
<td>Sets custom speedFactor (factor on road speed limit) and overrides the <a href="../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#speed_distributions">speedFactor distribution</a> of the vehicle type</td>
</tr>
<tr>
<td>insertionChecks</td>
<td>string list</td>
<td>Sets the list of safety checks to perform during vehicle insertion. Possible values are: <code>all</code>, <code>none</code>, <code>collision</code>, <code>leaderGap</code>, <code>followerGap</code>, <code>junction</code>, <code>stop</code>, <code>arrivalSpeed</code>, <code>oncomingTrain</code>, <code>speedLimit</code>, <code>pedestrians</code>. default <em>all</em></td>
</tr>
<tr>
<td>parkingBadges</td>
<td>string list</td>
<td>list of keywords to access restricted parking areas (the default empty list will still allow access to unrestricted parking areas)</td>
</tr>
</tbody>
</table>
<h2 id="routing_between_junctions">Routing between Junctions<a class="headerlink" href="#routing_between_junctions" title="Permanent link">#</a></h2>
<p>Trips and flows may use the attributes <code>fromJunction</code>, <code>toJunction</code>, and <code>viaJunctions</code> to describe origin, destination and intermediate locations. This is a special form of TAZ-routing and it must be enabled by either setting the duarouter option <strong>--junction-taz</strong> or by loading TAZ-definitions that use the respective junction IDs. When using option <strong>--junction-taz</strong>, all edges outgoing from a junction may be used at the origin and all edges incoming to a junction may be used to reach the intermediate and final junctions.</p>
<h2 id="routing_between_stops">Routing between Stops<a class="headerlink" href="#routing_between_stops" title="Permanent link">#</a></h2>
<ul>
<li>When defining a <code>&lt;trip&gt;</code> with <a href="../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#stops_and_waypoints">stop</a>-elements, routing will performed for each stop (starting a the trip origin or the prior stop) and ending at the destination.</li>
<li>If at least one stop is provided, either one of the <code>from</code> or <code>to</code> attributes (or <code>fromJunction</code>, <code>fromTaz</code>, ...) may be omitted.</li>
<li>If at least two stops are provided both of the <code>from</code> and <code>to</code> attributes may be omitted (the first stop serves as the origin while the last stop serves as the destination)</li>
<li>If a a stop with a <a href="../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#jumps"><code>jump</code></a>-attribute is given, the subsequent part of the route (to the next stop or the destination) will be disconnected</li>
</ul>
<h2 id="mapmatching">Mapmatching<a class="headerlink" href="#mapmatching" title="Permanent link">#</a></h2>
<p>Since version 1.2 duarouter supports mapping positions to roads using attributes that end with 'XY' or 'LonLat'. The latter only works in networks that are geo-referenced. The maximum distance for map-matching can be configured using option <strong>--mapmatch.distance</strong> (since version 1.5)</p>
<p>By setting the option <strong>--mapmatch.junctions</strong>, positions are mapped to junctions instead of edges. The routes are then <a href="#routing_between_junctions">computed between junctions</a>.
While it is possible to match detailed routes by using attribute <code>viaXY</code> or <code>viaLonLat</code>, this requires rather precise coordinates to work. To handle ambiguity/noise in the data it is better to use a <a href="../Tools/Routes.html#tracemapperpy">matching algorithm that considers the whole route when matching individual positions</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>map-matching works best with coordinates that lie on the centerline of an edge rather than on the median line of the road.</p>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Option <strong>--map-match-junctions</strong> may will shorten the route if the from-coordinate lies past the half-way point of the origin edge and also if the to-coordinate lies before the half-way point of the destination edge.</p>
</div>
<h2 id="vehicle_types">Vehicle Types<a class="headerlink" href="#vehicle_types" title="Permanent link">#</a></h2>
<p>If any trips use the <code>type</code> attribute, the
referenced <code>vType</code> element must be put into
the input file containing the trips / flow  or into an additionally loaded <em>rou.xml</em>-file or
into an <a href="/docs/sumo.html#format_of_additional_files"><em>additional-file</em></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, <a href="../duarouter.html">duarouter</a> will write <code>vType</code> definitions into the output route file ahead of the first vehicle using that type. By using the option <strong>--vtype-output</strong> these definitions can be put into another file.</p>
</div>
<h1 id="flow_definitions">Flow Definitions<a class="headerlink" href="#flow_definitions" title="Permanent link">#</a></h1>
<p>Flow amounts share most of the parameter with trip definitions. The
syntax is: <code>&lt;flow id="&lt;ID&gt;" from="&lt;ORIGIN_EDGE_ID&gt;" to="&lt;DESTINATION_EDGE_ID&gt;" begin="&lt;INTERVAL_BEGIN&gt;" end="&lt;INTERVAL_END&gt;" number="&lt;VEHICLES_TO_INSERT&gt;" [type="&lt;VEHICLE_TYPE&gt;"] [color="&lt;COLOR&gt;"]/&gt;</code>. Notice the following differences: the
vehicle does not take a certain departure time as not only one vehicle
is described by this parameter, but a set of, given within the attribute
"number". The departure times are spread uniformly within the time
interval described by &lt;INTERVAL_BEGIN&gt; and &lt;INTERVAL_END&gt;. All these
three attributes must be integer values. Flow definitions can also be
embedded into an interval tag. In this case one can (but does not have
to) leave the tags <code>begin</code> and
<code>end</code> out. So the following two snippets mean
the same:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;routes&gt;</span>
<span class="w">    </span><span class="nt">&lt;flow</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;edge0&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;edge1&quot;</span><span class="w"> </span><span class="na">begin=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">end=</span><span class="s">&quot;3600&quot;</span><span class="w"> </span><span class="na">number=</span><span class="s">&quot;100&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</code></pre></div>

<p>and</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;routes&gt;</span>
<span class="w">    </span><span class="nt">&lt;interval</span><span class="w"> </span><span class="na">begin=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">end=</span><span class="s">&quot;3600&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;flow</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;edge0&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;edge1&quot;</span><span class="w"> </span><span class="na">number=</span><span class="s">&quot;100&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/interval&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The input file always needs a root level element to enclose the trip/flow elements and this should be named <code>&lt;routes&gt;</code>.</p>
</div>
<p>Let's review flow parameter:</p>
<table>
<thead>
<tr>
<th>Attribute Name</th>
<th>Value Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>id</strong></td>
<td>id (string)</td>
<td>The name of vehicles that will be generated using this trip definition; vehicles and routes will be named "&lt;id&gt;_&lt;RUNNING&gt;" where &lt;RUNNING&gt; is a number starting at 0 and increased for each vehicle.</td>
</tr>
<tr>
<td>from</td>
<td>edge id</td>
<td>The name of the edge the routes start at; the edge must be a part of the used network</td>
</tr>
<tr>
<td>to<sup>(1)</sup></td>
<td>edge id</td>
<td>The name of an the edge the routes end at; the edge must be a part of the used network</td>
</tr>
<tr>
<td>via</td>
<td>edge ids</td>
<td>List of intermediate edge ids which shall be part of the route; the edges must be a part of the used network</td>
</tr>
<tr>
<td>type</td>
<td>type id</td>
<td>The type id of the vehicles to generate</td>
</tr>
<tr>
<td><strong>begin</strong></td>
<td>int</td>
<td>The begin time for the described interval</td>
</tr>
<tr>
<td>end</td>
<td>int</td>
<td>The end time for the interval; must be greater than &lt;begin&gt;; vehicles will be inserted between &lt;begin&gt; and &lt;end&gt;-1</td>
</tr>
<tr>
<td>vehsPerHour</td>
<td>float(#/h)</td>
<td>number of vehicles per hour, equally spaced (not together with period or probability)</td>
</tr>
<tr>
<td>period</td>
<td>float(s)</td>
<td>insert equally spaced vehicles at that period (not together with vehsPerHour or probability)</td>
</tr>
<tr>
<td>probability</td>
<td>float([0,1])</td>
<td>probability for emitting a vehicle each second (not together with vehsPerHour or period), see also <a href="../Simulation/Randomness.html#flows_with_a_random_number_of_vehicles">Simulation/Randomness</a></td>
</tr>
<tr>
<td>number</td>
<td>int</td>
<td>The number of vehicles that shall be inserted during this interval</td>
</tr>
<tr>
<td>color</td>
<td>color</td>
<td>Defines the color of the vehicles and their routes</td>
</tr>
<tr>
<td>departLane</td>
<td>int/string (≥0,"random","free","departlane")</td>
<td>The lane on which the vehicle shall be inserted</td>
</tr>
<tr>
<td>departPos</td>
<td>float(m)/string ("random","free","random_free","base")</td>
<td>The position at which the vehicle shall enter the net; "free" means the point closest to the start of the departlane where it is possible to insert the vehicle. "random_free" tries forcefully to find a free random position and if that fails, places the vehicle at the next "free" position. "base" sets the vehicle's depart position to the vehicle's length + eps (eps=.1m), this means the vehicle is completely at the begin of the depart lane.</td>
</tr>
<tr>
<td>departSpeed</td>
<td>float(m/s)/string (≥0,"random","max")</td>
<td>The speed with which the vehicle shall enter the network.</td>
</tr>
<tr>
<td>arrivalLane</td>
<td>int/string (≥0,"current")</td>
<td>The lane at which the vehicle shall leave the network<br><br><strong>Note:</strong> see <a href="../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#vehicles_and_routes">Definition of Vehicles, Vehicle Types, and Routes#Vehicles and Routes</a></td>
</tr>
<tr>
<td>arrivalPos</td>
<td>float(m)/string (≥0<sup>(1)</sup>,"random","max")</td>
<td>The position at which the vehicle shall leave the network<br><br><strong>Note:</strong> see <a href="../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#vehicles_and_routes">Definition of Vehicles, Vehicle Types, and Routes#Vehicles and Routes</a></td>
</tr>
<tr>
<td>arrivalSpeed</td>
<td>float(m/s)/string (≥0,"current")</td>
<td>The speed with which the vehicle shall leave the network<br><br><strong>Note:</strong> see <a href="../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#vehicles_and_routes">Definition of Vehicles, Vehicle Types, and Routes#Vehicles and Routes</a></td>
</tr>
</tbody>
</table>
<p><sup>(1)</sup> <a href="../jtrrouter.html">jtrrouter</a> does not need this
parameter, <a href="../duarouter.html">duarouter</a> requires it</p>
<h1 id="custom_edge_weights">Custom edge weights<a class="headerlink" href="#custom_edge_weights" title="Permanent link">#</a></h1>
<p>The option <strong>--weight-files</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;FILE&gt;</em></a> can be used to affect the weights used during routing. The
input format conforms to the output format of the <a href="../Simulation/Output/Lane-_or_Edge-based_Traffic_Measures.html">edge based traffic
measures</a>.
By default this uses the <strong>traveltime</strong> attribute of edges. The option <strong>--weight-attribute</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;STRING&gt;</em></a>
can be used to use other attributes for routing. Weight files that only
contain some of the network edges are permitted. If undefined, the
traveltime of an edge defaults to the free-flow traveltime. Also, only
the <em>weight-attribute</em> must be defined:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;meandata&gt;</span>
<span class="w">    </span><span class="nt">&lt;interval</span><span class="w"> </span><span class="na">begin=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">end=</span><span class="s">&quot;3600&quot;</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;whatever&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;edge</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;edgeID1&quot;</span><span class="w"> </span><span class="na">traveltime=</span><span class="s">&quot;23&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;edge</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;edgeID2&quot;</span><span class="w"> </span><span class="na">traveltime=</span><span class="s">&quot;1000&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/interval&gt;</span>
<span class="nt">&lt;/meandata&gt;</span>
</code></pre></div>

<h1 id="access_restrictions">Access restrictions<a class="headerlink" href="#access_restrictions" title="Permanent link">#</a></h1>
<p>Access to a network edge is typiclly restricte by the <a href="../Simulation/VehiclePermissions.html">vehicle class</a> defined in a <a href="../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#vehicle_types">vehicle type</a> but can also be customized with <a href="../Simulation/VehiclePermissions.html#custom_access_restrictions">numerical restrictions</a>.</p>
<h1 id="repair_routes">Repair routes<a class="headerlink" href="#repair_routes" title="Permanent link">#</a></h1>
<p>The <strong>--repair</strong> option intends to repair routes with connectivity problems.
Depending on how the route is define, duarouter will try to fix it differently:</p>
<ul>
<li>If the route is defined with the "edges" attribute, duarouter will first try
to fix the route by repairing the connectivity between the edges. If this is not
possible, then duarouter will search for another valid route between the edges
with connectivity problems. This may result in some edges from the original
route no longer being on the new route. In other words, edges defined with the
"edges" attribute are not taken as mandatory during route repair.</li>
<li>If the route is defined with the "edges" attribute but also has "stops",
duarouter will treat the edges of the stops as mandatory. First it will try to
repair the route as in the previous example, but if duarouter cannot find a valid
route that goes through the given stop edges, then the route is not possible to fix.</li>
<li>If the route is defined with the attribute "via" edges, all edges will be
treated as mandatory. If duarouter cannot fix the connectivity problems between
the specified edges, a warning appears and the route is not repairable.</li>
</ul>
<p>Duarouter also has the <strong>--repair.from</strong> and <strong>--repair.to</strong> options, which allow
to fix an invalid starting or ending edge using the first or last usable edge
of the route.</p>
<h1 id="converting_input_styles">Converting Input Styles<a class="headerlink" href="#converting_input_styles" title="Permanent link">#</a></h1>
<p>SUMO supports various styles of traffic demand definitions (vehicles, trips, flows) and <a href="../duarouter.html">duarouter</a> can be used to convert between them.</p>
<ul>
<li>By default, duarouter will convert all inputs to vehicles with embedded routes (route as child element of the vehicle).</li>
<li>With option <strong>--write-trips</strong> all input will be converted to trips<ul>
<li>combined with option <strong>--write-trips.geo</strong> trips will be written with geo-coordinates (fromLonLat, toLonLat) instead of edges (from, to)</li>
<li>combined with option <strong>--write-trips.junctions</strong> trips will be written between junctions (fromJunction, toJunction)</li>
</ul>
</li>
</ul>
<h1 id="usage_examples">Usage Examples<a class="headerlink" href="#usage_examples" title="Permanent link">#</a></h1>
<div class="codehilite"><pre><span></span><code><span class="n">duarouter --trip-files trips.xml --net-file road.net.xml --output-file result.rou.xml</span>
</code></pre></div>

<p>the file ''trips.xml '' given below must contain edges contained in the
network file ''road.net.xml ''.</p>
<div class="codehilite"><pre><span></span><code><span class="nt">&lt;routes&gt;</span>
<span class="w">    </span><span class="nt">&lt;trip</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;1625993_25&quot;</span><span class="w"> </span><span class="na">depart=</span><span class="s">&quot;25&quot;</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;-15229224#3&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;4474184&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;trip</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;1542480_35&quot;</span><span class="w"> </span><span class="na">depart=</span><span class="s">&quot;35&quot;</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;-46771582&quot;</span><span class="w">   </span><span class="na">to=</span><span class="s">&quot;-24038909#1&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;trip</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;1544282_35&quot;</span><span class="w"> </span><span class="na">depart=</span><span class="s">&quot;35&quot;</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;20554351#2&quot;</span><span class="w">  </span><span class="na">to=</span><span class="s">&quot;-4876083#5&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;trip</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;1565407_35&quot;</span><span class="w"> </span><span class="na">depart=</span><span class="s">&quot;35&quot;</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;-25771472#1&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;-25160470#0&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;trip</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;1620115_45&quot;</span><span class="w"> </span><span class="na">depart=</span><span class="s">&quot;45&quot;</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;11279351#3&quot;</span><span class="w">  </span><span class="na">to=</span><span class="s">&quot;5198584#1&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;trip</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;1647560_45&quot;</span><span class="w"> </span><span class="na">depart=</span><span class="s">&quot;45&quot;</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;54048879#0&quot;</span><span class="w">  </span><span class="na">to=</span><span class="s">&quot;-52105434#0&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;trip</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;3761248_45&quot;</span><span class="w"> </span><span class="na">depart=</span><span class="s">&quot;45&quot;</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;-31928311&quot;</span><span class="w">   </span><span class="na">to=</span><span class="s">&quot;23792451#7&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</code></pre></div>

<p>Trips may contain <a href="Importing_O/D_Matrices.html#describing_the_taz">source and destination
districts</a>
as well as edges. If the districts shall be used for routing this has to
be specified using the option "--with-taz". Furthermore (if the net does
not contain the districts) a districts file needs to be provided:</p>
<div class="codehilite"><pre><span></span><code><span class="n">duarouter --trip-files=&lt;TRIP_DEFS&gt; --net-file=&lt;SUMO_NET&gt; \</span>
<span class="n">  --output-file=MySUMORoutes.rou.xml --taz-files=&lt;DISTRICTS&gt; --with-taz</span>
</code></pre></div>

<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The edge weights are ignored when using TAZ this way. Instead TAZ edges are selected so that the travel time is minimized.</p>
</div>
<p>As we have to read in the flow definitions completely into the memory -
something we do not have to do necessarily with trips, an extra
parameter (-f or --flows) is used to make them known by the router:</p>
<div class="codehilite"><pre><span></span><code><span class="n">duarouter --flows=&lt;FLOW_DEFS&gt; --net=&lt;SUMO_NET&gt; \</span>
<span class="n">  --output-file=MySUMORoutes.rou.xml -b &lt;UINT&gt; -e &lt;UINT&gt;</span>
</code></pre></div>

<p>Remind that one can not insert flow descriptions into a trip definitions
file. The opposite (some trip definitions within a flow descriptions
file) is possible. You also can give both files at the input file, for
example:</p>
<div class="codehilite"><pre><span></span><code><span class="n">duarouter --flows=&lt;FLOW_DEFS&gt; --trip-files=&lt;TRIP_DEFS&gt; --net=&lt;SUMO_NET&gt; \</span>
<span class="n">  --output-file=MySUMORoutes.rou.xml -b &lt;UINT&gt; -e &lt;UINT&gt;</span>
</code></pre></div>

<h1 id="dealing_with_errors_during_routing">Dealing with Errors During Routing<a class="headerlink" href="#dealing_with_errors_during_routing" title="Permanent link">#</a></h1>
<p>When running <a href="../duarouter.html">duarouter</a> you may encounter errors
of the type</p>
<div class="codehilite"><pre><span></span><code><span class="n">Error</span><span class="o">:</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="s1">&#39;edge1&#39;</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="s1">&#39;edge2&#39;</span><span class="w"> </span><span class="n">found</span>
</code></pre></div>

<p>This is caused by an unconnected network. If your network has vehicle
class restrictions it may be that the connectivity is only lacking for
particular vehicle classes which is less obvious from the GUI. You can
ignore these routes using the option <strong>--ignore-errors</strong>. However, if a large proportion of
your routes cause this error you should definitely investigate your
network file for problems. The tool
<a href="../Tools/Net.html#netcheckpy">Tools/Net#netcheckpy</a> can be used
to pin down the connectivity gaps in your network.</p>
                </div>
          </div>
          <button onclick="goTopFunction()" id="goToTop" title="Go to top"><i class="fa-solid fa-arrow-up"></i></button>
        </div>

        <footer class="col-md-12">
          
            <br><small><i>This page was last edited on: 13 February 2026</i></small>
          
          <hr>
            <p>Copyright &copy; 2001-2026 German Aerospace Center (DLR) and others.</p>
          <p>Follow us on <a class="no-arrow-link" href="https://www.twitter.com/eclipsesumo/"><i class="fa-brands fa-x-twitter"></i></a> <a class="no-arrow-link" href="https://www.facebook.com/simulationofurbanmobility/"><i class="fa-brands fa-facebook"></i></a> <a class="no-arrow-link" href="https://www.instagram.com/eclipse.sumo/"><i class="fa-brands fa-instagram"></i></a> <a class="no-arrow-link" href="https://www.threads.net/@eclipse.sumo"><i class="fa-brands fa-threads"></i></a> <a class="no-arrow-link" href="https://bsky.app/profile/eclipse-sumo.bsky.social"><i class="fa-brands fa-bluesky"></i></a> <a class="no-arrow-link" href="https://www.linkedin.com/groups/5156801/"><i class="fab fa-linkedin"></i></a>
          | Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a></p>
        </footer>

      <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body" style="color: #495057 !important;">
                <p>Enter your search terms:</p>
                <script async src="https://cse.google.com/cse.js?cx=004302551366764109984:1kpgtzrm6kv"></script>
                <div class="gcse-search"></div>
            </div>
        </div>
    </div>
</div>
      <script>
        window.onscroll = function() {scrollFunction()};

        function scrollFunction() {
          if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("goToTop").style.display = "block";
          } else {
            document.getElementById("goToTop").style.display = "none";
          }
        }

        function goTopFunction() {
          document.body.scrollTop = 0;
          document.documentElement.scrollTop = 0;
        }

        var base_url = "..",
            shortcuts = {"edit": 69, "help": 191, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>

        <script>
          const toggleSwitch = document.querySelector('#theme-switch input[type="checkbox"]');

          function switchTheme(e) {
              if (e.target.checked) {
                  localStorage.setItem('sumo-docs-theme', 'dark');
                  document.documentElement.setAttribute('data-theme', 'dark');
                  toggleSwitch.checked = true;
              } else {
                  localStorage.setItem('sumo-docs-theme', 'light');
                  document.documentElement.setAttribute('data-theme', 'light');
                  toggleSwitch.checked = false;
              }
          }

          toggleSwitch.addEventListener('change', switchTheme, false);

          if (document.documentElement.getAttribute("data-theme") == "dark"){
              toggleSwitch.checked = true;
          }
          </script>

      <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Key</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody style="color: #495057 !important;">
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help dialog</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search the Documentation</td>
                  </tr>
                  <tr>
                    <td class="edit shortcut"><kbd>e</kbd></td>
                    <td>Edit current page on GitHub</td>
                  </tr>
                </tbody>
              </table>
            </div>
        </div>
    </div>
</div>
    </body>
</html>